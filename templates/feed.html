{{ define "content" }}
    <div class="mb-3">
        <a href="/admin/feeds" class="btn btn-secondary">← Back to Feeds</a>
    </div>

    <div class="card mb-4">
        <div class="card-header">
            <h2 class="card-title mb-0">Feed Information</h2>
        </div>
        <div class="card-body">
            <dl class="row">
                <dt class="col-sm-3">ID:</dt>
                <dd class="col-sm-9">{{ .feed.ID }}</dd>

                <dt class="col-sm-3">URL:</dt>
                <dd class="col-sm-9"><a href="{{ .feed.URL }}" target="_blank" class="text-break">{{ .feed.URL }}</a></dd>

                {{ if .feed.Title }}
                <dt class="col-sm-3">Title:</dt>
                <dd class="col-sm-9">{{ .feed.Title }}</dd>
                {{ end }}

                {{ if .feed.Description }}
                <dt class="col-sm-3">Description:</dt>
                <dd class="col-sm-9">{{ .feed.Description }}</dd>
                {{ end }}

                <dt class="col-sm-3">Last Successfully Fetched:</dt>
                <dd class="col-sm-9">
                    {{ if .feed.LastSuccessfullyFetchedAt }}
                        {{ .feed.LastSuccessfullyFetchedAt.Format "2006-01-02 15:04:05" }}
                    {{ else }}
                        <span class="text-muted fst-italic">Never</span>
                    {{ end }}
                </dd>

                <dt class="col-sm-3">Last Error:</dt>
                <dd class="col-sm-9">
                    {{ if .feed.LastError }}
                        <span class="text-danger small">{{ .feed.LastError }}</span>
                    {{ else }}
                        <span class="text-muted">—</span>
                    {{ end }}
                </dd>

                <dt class="col-sm-3">Last Error At:</dt>
                <dd class="col-sm-9">
                    {{ if .feed.LastErrorAt }}
                        {{ .feed.LastErrorAt.Format "2006-01-02 15:04:05" }}
                    {{ else }}
                        <span class="text-muted">—</span>
                    {{ end }}
                </dd>

                <dt class="col-sm-3">Created At:</dt>
                <dd class="col-sm-9">{{ .feed.CreatedAt.Format "2006-01-02 15:04:05" }}</dd>
            </dl>

            <div class="mt-3">
                <form action="/admin/feeds/{{ .feed.ID }}/fetch" method="post" class="d-inline">
                    <button type="submit" class="btn btn-primary">Fetch Feed</button>
                </form>
                <form action="/admin/feeds/{{ .feed.ID }}/delete" method="post" class="d-inline" onsubmit="return confirm('Are you sure you want to delete this feed?');">
                    <button type="submit" class="btn btn-danger">Delete Feed</button>
                </form>
            </div>
        </div>
    </div>

    <h3 class="mb-3">Items</h3>
    {{ if .items }}
    <div class="table-responsive">
        <table class="table table-striped table-hover">
            <thead>
                <tr>
                    <th>ID</th>
                    <th>Title</th>
                    <th>Author</th>
                    <th>Published At</th>
                    <th>Created At</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                {{ range .items }}
                <tr>
                    <td>{{ .ID }}</td>
                    <td>{{ .Title }}</td>
                    <td>{{ .Author }}</td>
                    <td>{{ if .PublishedAt }}{{ .PublishedAt.Format "2006-01-02 15:04:05" }}{{ else }}<span class="text-muted">N/A</span>{{ end }}</td>
                    <td>{{ .CreatedAt.Format "2006-01-02 15:04:05" }}</td>
                    <td>
                        <a href="/admin/items/{{ .ID }}" class="btn btn-sm btn-outline-primary">View</a>
                    </td>
                </tr>
                {{ end }}
            </tbody>
        </table>
    </div>

    {{ template "pagination" . }}
    {{ else }}
    <div class="alert alert-info">No items found for this feed.</div>
    {{ end }}
{{ end }}

